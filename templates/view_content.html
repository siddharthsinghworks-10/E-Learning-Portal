{% extends "base.html" %}
{% block title %}{{ content.title }} | {{ course.title }}{% endblock %}
{% block content %}
<h1>{{ content.title }}</h1>
<p class="muted">{{ course.title }} Â· {{ content.content_type|capitalize }}</p>
<p>{{ content.description or "No description for this material." }}</p>

<section class="content-viewer">
    {% set ext = content.file_path.rsplit('.', 1)[-1]|lower %}

    {% if ext in ["mp4", "webm", "ogg"] %}
        <video controls style="width: 100%; max-height: 480px; border-radius: 0.75rem; background:#000;">
            <source src="{{ file_url }}" type="video/{{ ext }}">
            Your browser does not support the video tag.
        </video>
    {% elif ext in ["pdf"] %}
        <iframe src="{{ file_url }}"
                style="width: 100%; height: 70vh; border-radius: 0.75rem; border: 1px solid #e5e7eb;"
                title="{{ content.title }}">
        </iframe>
    {% else %}
        <div class="card">
            <p>This file type is not previewed here. You can download/open it directly:</p>
            <a class="btn secondary" href="{{ file_url }}" target="_blank">Open File</a>
        </div>
    {% endif %}
</section>

<div class="toolbar" style="margin-top:1rem;">
    <a class="btn small secondary" href="{{ url_for('course_detail', course_id=course.id) }}">Back to Course</a>
</div>
{% endblock %}

