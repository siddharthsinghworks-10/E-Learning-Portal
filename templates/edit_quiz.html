{% extends "base.html" %}
{% block title %}Edit Quiz{% endblock %}
{% block content %}
<h1>Edit Quiz: {{ quiz.title }}</h1>

<form method="post" class="form">
    <label>
        Quiz Title
        <input type="text" name="title" value="{{ quiz.title }}" required>
    </label>

    <h2>Questions</h2>
    {% for question in quiz.questions %}
        <fieldset class="question-block">
            <legend>Question {{ loop.index }}</legend>
            <label>
                Text
                <input type="text" name="q{{ question.id }}_text" value="{{ question.text }}">
            </label>
            <div class="choices">
                {% set current_correct = None %}
                {% for choice in question.choices %}
                    {% if choice.is_correct %}
                        {% set current_correct = choice.id %}
                    {% endif %}
                {% endfor %}
                {% for choice in question.choices %}
                    <label>
                        Choice
                        <input type="text" name="choice{{ choice.id }}_text" value="{{ choice.text }}">
                    </label>
                {% endfor %}
            </div>
            <label>
                Correct option
                <select name="q{{ question.id }}_correct">
                    <option value="">-- Select --</option>
                    {% for choice in question.choices %}
                        <option value="{{ choice.id }}" {% if current_correct == choice.id %}selected{% endif %}>
                            {{ loop.index }}
                        </option>
                    {% endfor %}
                </select>
            </label>
        </fieldset>
    {% endfor %}

    <button class="btn primary" type="submit">Save Changes</button>
</form>
{% endblock %}

